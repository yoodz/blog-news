(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1069:(e,t,s)=>{"use strict";s.d(t,{default:()=>V});var r=s(5155),a=s(2115),n=s(2177),i=s(2355),o=s(3052),l=s(5623),c=s(2596),d=s(9688),u=s(832),x=s.n(u);function m(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.QP)((0,c.$)(t))}function f(e){let t=x()(e),s=x()(),r=s.diff(t,"minute");if(r<60)return"".concat(r,"分钟前");let a=s.diff(t,"hour");if(a<24){let e=r%60;return 0===e?"".concat(a,"小时前"):"".concat(a,"小时").concat(e,"分钟前")}let n=Math.floor(a/24);return n<=30?"".concat(n,"天前"):t.format("YYYY-MM-DD HH:mm:ss")}var p=s(9708);let h=(0,s(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function g(e){let{className:t,variant:s,size:a,asChild:n=!1,...i}=e,o=n?p.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:m(h({variant:s,size:a,className:t})),...i})}function v(e){let{className:t,...s}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:m("mx-auto flex w-full justify-center",t),...s})}function j(e){let{className:t,...s}=e;return(0,r.jsx)("ul",{"data-slot":"pagination-content",className:m("flex flex-row items-center gap-1",t),...s})}function b(e){let{...t}=e;return(0,r.jsx)("li",{"data-slot":"pagination-item",...t})}function y(e){let{className:t,isActive:s,size:a="icon",...n}=e;return(0,r.jsx)("a",{"aria-current":s?"page":void 0,"data-slot":"pagination-link","data-active":s,className:m(h({variant:s?"outline":"ghost",size:a})," cursor-pointer",t),...n})}function w(e){let{className:t,...s}=e;return(0,r.jsxs)(y,{"aria-label":"Go to previous page",size:"default",className:m("gap-1 px-2.5 sm:pl-2.5 cursor-pointer",t),...s,children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function N(e){let{className:t,...s}=e;return(0,r.jsxs)(y,{"aria-label":"Go to next page",size:"default",className:m("gap-1 px-2.5 sm:pr-2.5 cursor-pointer",t),...s,children:[(0,r.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,r.jsx)(o.A,{})]})}function k(e){let{className:t,...s}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:m("flex size-9 items-center justify-center",t),...s,children:[(0,r.jsx)(l.A,{className:"size-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})}function C(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"skeleton",className:m("bg-primary/10 animate-pulse rounded-md",t),...s})}var z=s(9601),S=s(4416);function _(e){let{...t}=e;return(0,r.jsx)(z.bL,{"data-slot":"dialog",...t})}function A(e){let{...t}=e;return(0,r.jsx)(z.l9,{"data-slot":"dialog-trigger",...t})}function P(e){let{...t}=e;return(0,r.jsx)(z.ZL,{"data-slot":"dialog-portal",...t})}function I(e){let{className:t,...s}=e;return(0,r.jsx)(z.hJ,{"data-slot":"dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...s})}function R(e){let{className:t,children:s,...a}=e;return(0,r.jsxs)(P,{"data-slot":"dialog-portal",children:[(0,r.jsx)(I,{}),(0,r.jsxs)(z.UC,{"data-slot":"dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a,children:[s,(0,r.jsxs)(z.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(S.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function F(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",t),...s})}function M(e){let{className:t,...s}=e;return(0,r.jsx)(z.hE,{"data-slot":"dialog-title",className:m("text-lg leading-none font-semibold",t),...s})}var E=s(968);function D(e){let{className:t,...s}=e;return(0,r.jsx)(E.b,{"data-slot":"label",className:m("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let B=n.Op,O=a.createContext({}),Y=e=>{let{...t}=e;return(0,r.jsx)(O.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},G=()=>{let e=a.useContext(O),t=a.useContext(H),{getFieldState:s}=(0,n.xW)(),r=(0,n.lN)({name:e.name}),i=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},H=a.createContext({});function L(e){let{className:t,...s}=e,n=a.useId();return(0,r.jsx)(H.Provider,{value:{id:n},children:(0,r.jsx)("div",{"data-slot":"form-item",className:m("grid gap-2",t),...s})})}function W(e){let{className:t,...s}=e,{error:a,formItemId:n}=G();return(0,r.jsx)(D,{"data-slot":"form-label","data-error":!!a,className:m("data-[error=true]:text-destructive-foreground",t),htmlFor:n,...s})}function X(e){let{...t}=e,{error:s,formItemId:a,formDescriptionId:n,formMessageId:i}=G();return(0,r.jsx)(p.DX,{"data-slot":"form-control",id:a,"aria-describedby":s?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!s,...t})}function $(e){let{className:t,type:s,...a}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:m("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var J=s(1362),Q=s(6671);let T=e=>{let{...t}=e,{theme:s="system"}=(0,J.D)();return(0,r.jsx)(Q.l$,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground font-medium",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground font-medium"}},...t})};function U(e){let{date:t,refreshInterval:s}=e,[n,i]=(0,a.useState)("");return(0,a.useEffect)(()=>{if(i(f(t)),s){let e=setInterval(()=>{i(f(t))},s);return()=>clearInterval(e)}},[t,s]),(0,r.jsx)("span",{children:n})}function V(e){var t,s;let{initialData:i}=e,o=(0,n.mN)(),[l,c]=(0,a.useState)({...i,article:(null==i?void 0:i.result.slice(0,20))||[]}),[d,u]=(0,a.useState)((null==i?void 0:i.config)||{}),[x,m]=(0,a.useState)((null==i?void 0:i.totalRss)||0),[f,p]=(0,a.useState)(0),{totalPage:h,currentPage:z}=(0,a.useMemo)(()=>{var e;return{totalPage:Math.ceil((null==l?void 0:null===(e=l.result)||void 0===e?void 0:e.length)/20),currentPage:+l.page||1}},[l]);async function S(e){try{c({...l,page:e,article:i.result.slice((e-1)*20,20*e)})}catch(e){console.log(e,"clientPage-77"),Q.oR.error("请求失败，请刷新重试")}finally{window.scrollTo({top:0,left:0,behavior:"smooth"})}}let P=e=>{let{id:t,link:s}=e||{};console.log(e,"clientPage-99");try{fetch("https://cf.afunny.top/article/pv?id=".concat(t))}catch(e){console.log(e,"clientPage-92")}finally{window.open(s)}},I=e=>{if("pre"===e){z>1&&S(z-1);return}if("next"===e){z<h&&S(z+1);return}S(e)},E=async()=>{let e=await fetch("https://blogapi.afunny.top/.netlify/functions/track-visit?slug=blog_news_rss_click");p((await e.json()).count)},D=async()=>{Q.oR.success("加急成功！"),E()};return(0,a.useEffect)(()=>{},[]),(0,r.jsxs)("div",{className:"max-w-3xl mx-auto p-4 py-8",children:[(0,r.jsx)(T,{}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-2xl font-bold text-zinc-800 sticky  top-0  bg-white pt-4 pb-4 z-10",children:[(0,r.jsxs)("div",{className:"md:flex items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-3 whitespace-nowrap cursor-pointer hover:underline",onClick:()=>S(1),children:"Blog News"}),(0,r.jsx)("svg",{onClick:()=>window.open("https://github.com/yoodz/blog-news"),fill:"currentColor",height:"1em",stroke:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"})})]}),(0,r.jsxs)("span",{className:"text-xs font-normal flex-1 absolute opacity-60 mr-1 md:relative md:ml-3",children:["最近更新: ",(null==d?void 0:d.value)||"-",(0,r.jsx)("span",{className:"mr-1 ml-1",children:"•"}),"已收录: ",x||"-","个"]})]}),(0,r.jsxs)(_,{children:[(0,r.jsx)(A,{asChild:!0,children:(0,r.jsx)(g,{className:"cursor-pointer",variant:"outline",onClick:E,children:"提交RSS"})}),(0,r.jsx)(R,{children:(0,r.jsxs)(F,{children:[(0,r.jsx)(M,{className:"mb-5",children:"提交RSS"}),(0,r.jsx)(B,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(function(){Q.oR.success("暂未开放。")}),className:"space-y-8",children:[(0,r.jsx)(Y,{control:o.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(W,{children:"网站名称"}),(0,r.jsx)(X,{children:(0,r.jsx)($,{placeholder:"请输入网站名称",...t})})]})}}),(0,r.jsx)(Y,{control:o.control,name:"rss",render:e=>{let{field:t}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(W,{children:"RSS地址"}),(0,r.jsx)(X,{children:(0,r.jsx)($,{placeholder:"请输入RSS地址",...t})})]})}}),(0,r.jsx)(Y,{control:o.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(W,{children:"邮箱"}),(0,r.jsx)(X,{children:(0,r.jsx)($,{placeholder:"请输入邮箱",...t})})]})}}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(g,{type:"submit",className:"active:opacity-80 mr-2 cursor-pointer",variant:"secondary",children:"提交（暂未开放）"}),(0,r.jsxs)(g,{type:"reset",onClick:D,className:"flex-1 active:opacity-80 cursor-pointer",children:["加急作者(",f,")"]})]})]})})]})})]})]}),(0,r.jsx)("div",{className:"text-md text-gray-500 my-4",children:"一个基于RSS的Blog News博客聚合项目，每天自动抓取感兴趣的博客文章, 及时获取博客动态。"}),(0,r.jsxs)("main",{className:"flex flex-col gap-2 row-start-2 items-center sm:items-start",children:[null==l?void 0:null===(t=l.article)||void 0===t?void 0:t.map(e=>{let{title:t,hostname:s,pubDate:a}=e||{};return(0,r.jsxs)("div",{className:"w-full cursor-pointer hover:bg-blue-50 p-2 rounded-lg",onClick:()=>P(e),children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap hover:underline",children:[" ",t]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"text-gray-400 font-light text-xs",children:[(0,r.jsx)(U,{date:a,refreshInterval:6e4}),(0,r.jsx)("span",{className:"mr-1 ml-1",children:"•"}),(0,r.jsx)("span",{className:"font-bold hover:underline",children:s})]})})]},t)}),!(null==l?void 0:null===(s=l.result)||void 0===s?void 0:s.length)&&Array.from({length:20}).map((e,t)=>(0,r.jsx)("div",{className:"flex items-center w-full mt-3 mb-5",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(C,{className:"h-4 w-4/5 mb-2"}),(0,r.jsx)(C,{className:"h-4 w-1/3"})]})},t)),(0,r.jsx)(v,{children:(0,r.jsxs)(j,{children:[(0,r.jsx)(b,{children:(0,r.jsx)(w,{onClick:()=>I("pre")})}),z>2&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{children:(0,r.jsx)(y,{onClick:()=>I(1),isActive:1===z,children:1})}),z>3&&(0,r.jsx)(b,{children:(0,r.jsx)(k,{})})]}),Array.from({length:h}).map((e,t)=>!function(e){let t=e+1;return(!(z>2)||!(t<2))&&(!(z<=h-2)||!(t>h-1))&&!!(t>=z-1)&&!!(t<=z+1)}(t)?null:(0,r.jsx)(b,{children:(0,r.jsx)(y,{onClick:()=>I(t+1),isActive:t+1===z,children:t+1})},t)),z<h-1&&(0,r.jsxs)(r.Fragment,{children:[z<h-2&&(0,r.jsx)(b,{children:(0,r.jsx)(k,{})}),(0,r.jsx)(b,{children:(0,r.jsx)(y,{onClick:()=>I(h),isActive:h===z,children:h})})]}),(0,r.jsx)(b,{children:(0,r.jsx)(N,{onClick:()=>I("next")})})]})})]})]})}},3729:(e,t,s)=>{Promise.resolve().then(s.bind(s,1069))}},e=>{var t=t=>e(e.s=t);e.O(0,[212,441,684,358],()=>t(3729)),_N_E=e.O()}]);